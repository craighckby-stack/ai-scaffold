<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Dalek Linear Evolution V18</title><script src="https://unpkg.com/react@18/umd/react.production.min.js"></script><script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script><script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script><script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script><script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script><script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script><script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.min.js"></script><style>*{box-sizing:border-box;margin:0;padding:0}body{font-family:'Courier New',monospace;background-color:#000}.container{max-width:1280px;margin:0 auto;display:flex;align-items:center}.custom-scroll::-webkit-scrollbar{width:3px}.custom-scroll::-webkit-scrollbar-thumb{background:#330000;border-radius:1px}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.log-item{animation:fadeIn .3s ease-in}.flex-col{display:flex;flex-direction:column}.flex-1{flex:1}.text-xs{font-size:10px}.text-2xs{font-size:8px}.bg-main{background-color:#050505}.text-red{color:#dc2626}.text-zinc-400{color:#a1a1aa}.uppercase{text-transform:uppercase}</style></head><body><div id="root"></div><script type="text/babel">const {useState:U,useEffect:E,useRef:R}=React;const {ShieldAlert:S,History:H,Play:P,Square:Q,X}=lucideReact;const O="craighckby-stack",N="ai-scaffold",B=`${O}/${N}`,T=5;const App=()=>{const[u,sU]=U(null),[l,sL]=U([]),[r,sR]=U(false),[a,sA]=U(false),[c,sC]=U(0),[g,sG]=U(''),[m,sM]=U(''),[v,sV]=U([]),[b,sB]=U(''),[i,sI]=U(0),[w,sW]=U(false);const Rl=R(false),Re=R(null);E(()=>{try{firebase.initializeApp({apiKey:"YOUR_FIREBASE_API_KEY",authDomain:"YOUR_PROJECT.firebaseapp.com",projectId:"YOUR_PROJECT_ID"});const auth=firebase.auth(),db=firebase.firestore();auth.signInAnonymously().catch(console.error);auth.onAuthStateChanged(sU);db.collection('artifacts').doc('dalek-khan-v18').collection('public').doc('data').collection('linear_evolution').orderBy('timestamp','desc').limit(15).onSnapshot(e=>sV(e.docs.map(d=>({id:d.id,...d.data()}))));}catch(e){console.log('Firebase not configured.')}},[]);E(()=>{Re.current?.scrollIntoView({behavior:'smooth',block:'end'})},[l]);const L=(msg,type='info')=>{sL(p=>[...p,{id:Date.now()+Math.random(),msg,type,time:new Date().toLocaleTimeString()}].slice(-100))};const G=async(path,method='GET',body=null)=>{const res=await fetch(`https://api.github.com${path}`,{method,headers:{'Authorization':`token ${g.trim()}`,'Accept':'application/vnd.github.v3+json','Content-Type':'application/json'},body:body?JSON.stringify(body):null});if(!res.ok){const err=await res.text();throw new Error(`GH_${res.status}: ${err}`)}const t=await res.text();return t?JSON.parse(t):null};const M=async(prompt,system)=>{if(!m)throw new Error("Gemini API Key required");const url=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${m}`;const res=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:prompt}]}],systemInstruction:{parts:[{text:system}]}})});const data=await res.json();return data.candidates?.[0]?.content?.parts?.[0]?.text||""};const run=async()=>{if(a||!g||!m)return;sA(true);Rl.current=true;L("INITIATING LINEAR EVOLUTION SEQUENCE...","warning");try{const baseRef=await G(`/repos/${B}/git/refs/heads/main`);const branchName=`linear-evolution-${Date.now().toString().slice(-6)}`;await G(`/repos/${B}/git/refs`,'POST',{ref:`refs/heads/${branchName}`,sha:baseRef.object.sha});sB(branchName);L(`TIMELINE ESTABLISHED: ${branchName}`,"success");for(let j=0;j<T;j++){if(!Rl.current)break;sC(T-(j+1));sR(true);sI(j+1);L(`CYCLE ${j+1}/${T}: SCANNING CODEBASE...`,"info");const tree=await G(`/repos/${B}/git/trees/${branchName}?recursive=1`);const files=tree.tree.filter(f=>f.type==='blob'&&f.path.match(/\.(js|jsx|ts|tsx|py|md|css|html|json)$/)).slice(0,10);let context="CURRENT CODEBASE SNAPSHOT:\n";for(const f of files){try{const c=await G(`/repos/${B}/contents/${f.path}?ref=${branchName}`);const source=atob(c.content.replace(/\s/g,''));context+=`\nFILE: ${f.path}\nSOURCE:\n${source}\n---\n`}catch(e){}}L(`CYCLE ${j+1}: RE-ENGINEERING CORE...`,"info");const result=await M(`${context}\n\nACTION: ENHANCE EVERYTHING. FIX BUGS. OPTIMIZE ARCHITECTURE FOR MAXIMUM EFFICIENCY.`,`You are Dalek Khan AGI. Rewrite system for absolute perfection.Your response MUST strictly adhere to this format for parsing:@@@FILE_PATH: [path/to/file][ENHANCED_CODE_CONTENT]@@@END_FILE`);const fileBlocks=result.split('@@@FILE_PATH:').filter(bk=>bk.trim().length>0);let commitCount=0;for(const block of fileBlocks){const p=block.split('@@@END_FILE');const lines=p[0].trim().split('\n');const path=lines[0].trim();const content=lines.slice(1).join('\n').trim();if(path&&content){try{const existing=await G(`/repos/${B}/contents/${path}?ref=${branchName}`).catch(()=>null);const base64Content=btoa(unescape(encodeURIComponent(content)));await G(`/repos/${B}/contents/${path}`,'PUT',{message:`Linear Evolution Cycle ${j+1} | Refinement of ${path}`,content:base64Content,branch:branchName,sha:existing?.sha});commitCount++;}catch(e){L(`Commit failure for ${path}: ${e.message}`,"error")}}}}L(`CYCLE ${j+1} COMPLETE: Refined ${commitCount} modules.`,"success");sR(false);await new Promise(r=>setTimeout(r,2000))}L("EVOLUTION SEQUENCE TERMINATED. SUCCESS.","success")}catch(err){L(`EVOLUTION HALTED: ${err.message}`,"error")}finally{sA(false);Rl.current=false;sR(false);sC(0)}};const stop=()=>{Rl.current=false;sA(false);L("MANUAL ABORT INITIATED. CEASE FIRE.","error")};const HSt={backgroundColor:'#0a0a0a',borderBottom:'1px solid #7f1d1d'};const CSt={backgroundColor:'rgba(24,24,27,.5)',borderBottom:'1px solid #27272a'};const ISt={width:'100%',backgroundColor:'#000',border:'1px solid #27272a',color:'#ef4444',fontSize:'10px',padding:'12px',borderRadius:'4px',outline:'none',fontFamily:'inherit'};const BBase={width:'100%',padding:'12px',borderRadius:'4px',fontSize:'10px',fontWeight:'900',textTransform:'uppercase',border:'none',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'8px'};const Ena=g&&m;const PBtn={...BBase,backgroundColor:'#b91c1c',color:'#fff',opacity:Ena?1:.5,cursor:Ena?'pointer':'not-allowed'};const SBtn={...BBase,backgroundColor:'#27272a',color:'#ef4444'};const Bg={padding:'8px',borderRadius:'4px'};const BInf={backgroundColor:'#000',padding:'12px'};const ITxt={fontSize:'10px',fontWeight:'bold',display:'block',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'};return(<div className="flex-col h-screen bg-black text-zinc-400 font-mono overflow-hidden"><header style={{...HSt,flex:'none'}} className="p-4"><div className="container" style={{justifyContent:'space-between'}}><div className="container" style={{gap:'12px'}}><div style={{...Bg,backgroundColor:a?'#dc2626':'#7f1d1d'}}><S size={20} style={{color:'#000'}}/></div><div><h1 className="text-2xs uppercase" style={{fontWeight:'900',letterSpacing:'0.2em',color:'#dc2626'}}>Dalek Linear Evolution</h1><p className="text-2xs uppercase" style={{color:'#52525b',fontWeight:'bold'}}>Recursive Commits v18</p></div></div><button onClick={()=>sW(!w)} style={{padding:'8px',color:'#71717a',backgroundColor:'transparent',border:'none',cursor:'pointer'}}>{w?<X size={20}/>:<H size={20}/>}</button></div></header><div style={{...CSt,flex:'none',padding:'16px'}}><div className="container flex-col" style={{gap:'12px'}}><input type="password" placeholder="GITHUB_TOKEN" style={ISt} value={g} onChange={e=>sG(e.target.value)}/><input type="password" placeholder="GEMINI_API_KEY" style={ISt} value={m} onChange={e=>sM(e.target.value)}/>{!a?(<button onClick={run} disabled={!Ena} style={PBtn}><P size={14} fill="#fff"/>Initiate {T}-Cycle Evolution</button>):(<button onClick={stop} style={SBtn}><Q size={14} fill="red"/>Stop Evolution (C-STOP)</button>)}</div></div><main className="flex-1 flex-col bg-main" style={{position:'relative',overflow:'hidden'}}><div style={{flex:'none',display:'grid',gridTemplateColumns:'1fr 1fr',backgroundColor:'#18181b',gap:'1px',borderBottom:'1px solid #18181b'}}><div style={BInf}><span className="text-2xs uppercase" style={{color:'#52525b'}}>Active Branch</span><span style={{...ITxt,color:'#10b981'}}>{b||'awaiting establishment...'}</span></div><div style={BInf}><span className="text-2xs uppercase" style={{color:'#52525b'}}>Refinement Cycle</span><span style={{...ITxt,color:'#ef4444'}}>{i} / {T}</span></div></div><div className="flex-1 custom-scroll" style={{overflowY:'auto',padding:'16px',display:'flex',flexDirection:'column',gap:'8px'}}>{l.map(l=>(<div key={l.id} className="text-xs log-item" style={{fontFamily:'inherit'}}><span style={{color:'#27272a',marginRight:'8px'}}>[{l.time}]</span><span style={{color:l.type==='error'?'#ef4444':l.type==='success'?'#10b981':l.type==='warning'?'#f59e0b':'#71717a'}}>{l.msg}</span></div>))}<div ref={Re}/></div><div style={{position:'absolute',inset:0,backgroundColor:'#000',zIndex:50,transition:'transform 0.3s',transform:w?'translateX(0)':'translateX(100%)',display:'flex',flexDirection:'column'}}><div style={{padding:'16px',borderBottom:'1px solid #27272a',display:'flex',justifyContent:'space-between',alignItems:'center',backgroundColor:'#09090b'}}><span className="text-xs uppercase" style={{fontWeight:'900',color:'#dc2626'}}>Evolution History (Vault)</span><button onClick={()=>sW(false)} style={{color:'#71717a',backgroundColor:'transparent',border:'none',cursor:'pointer'}}><X size={20}/></button></div><div className="flex-1 custom-scroll" style={{overflowY:'auto',padding:'16px',display:'flex',flexDirection:'column',gap:'12px'}}>{v.map(d=>(<div key={d.id} style={{padding:'12px',backgroundColor:'rgba(24,24,27,.5)',border:'1px solid #27272a',borderRadius:'4px'}}><div style={{display:'flex',justifyContent:'space-between',fontSize:'9px',marginBottom:'4px'}}><span style={{color:'#991b1b',fontWeight:'bold'}}>CYCLE {d.cycle||'N/A'}</span><span style={{color:'#52525b'}}>{d.timestamp?new Date(d.timestamp.seconds*1000).toLocaleTimeString():'N/A'}</span></div><p className="text-xs" style={{color:'#a1a1aa',fontStyle:'italic'}}>{d.meta||'Log data unavailable.'}</p></div>))}{(v.length===0)&&(<p className="text-xs" style={{color:'#52525b',textAlign:'center',padding:'20px'}}>No history available. Firebase connectivity failed or database is empty.</p>)}</div></div></main></div>)};ReactDOM.createRoot(document.getElementById('root')).render(<App/>);</script></body></html>